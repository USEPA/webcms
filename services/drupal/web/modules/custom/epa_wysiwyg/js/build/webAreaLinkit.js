!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.webAreaLinkit=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js"(e,t,i){e.exports=i("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js"(e,t,i){e.exports=i("dll-reference CKEditor5.dll")("./src/ui.js")},"dll-reference CKEditor5.dll"(e){"use strict";e.exports=CKEditor5.dll}},t={};function i(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,i),n.exports}i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{"use strict";i.d(o,{default:()=>s});var e=i("ckeditor5/src/core.js"),t=i("ckeditor5/src/ui.js");const r=jQuery;function n(e,t){var i=r("<li>").addClass("linkit-result-line"),o=r("<div>").addClass("linkit-result-line-wrapper");return o.addClass(t.status),o.append(r("<span>").html(t.label).addClass("linkit-result-line--title")),t.hasOwnProperty("description")&&o.append(r("<span>").html(t.description).addClass("linkit-result-line--description")),i.append(o).appendTo(e)}function a(e,t){var i=this.element.autocomplete("instance"),o={};t.forEach((function(e){const t=e.hasOwnProperty("group")?e.group:"";o.hasOwnProperty(t)||(o[t]=[]),o[t].push(e)})),r.each(o,(function(t,o){t.length&&e.append('<li class="linkit-result-line--group ui-menu-divider">'+t+"</li>"),r.each(o,(function(t,o){i._renderItemData(e,o)}))}))}class s extends e.Plugin{static get pluginName(){return"WebAreaLinkit"}init(){const e=this.editor,t=e.plugins.get("LinkUI");e.plugins.get("ContextualBalloon").on("set:visibleView",((e,i,o)=>{o===t.formView&&this._ensureProfileRadios(t.formView)}))}_ensureProfileRadios(e){if(e._webAreaProfileRadios)return;const i=this.editor.locale,o=new t.View(i);o.setTemplate({tag:"div",attributes:{class:["ck-webarea-linkit-profiles"],style:{marginBottom:"8px"}},children:[this._radio(i,"default","No filter: all WebCMS content",!0),this._radio(i,"web_area_content","Your internal links")]}),e.children.add(o,0),e._focusables.add(o),e.focusTracker.add(o.element),o.element.addEventListener("change",(t=>{t.target.matches('input[type="radio"]')&&this._switchProfile(t.target.value,e)})),this._switchProfile("default",e),e._webAreaProfileRadios=o}_radio(e,i,o,r=!1){const n=new t.View(e);return n.setTemplate({tag:"label",attributes:{style:{display:"block",fontSize:"13px"}},children:[{tag:"input",attributes:{type:"radio",name:"webarea-linkit-profile",value:i,checked:r}},{tag:"span",children:[o]}]}),n}_switchProfile(e,t){const i=t.urlInputView.fieldView.element;i.removeAttribute("data-autocomplete-path");!function(e,t){const{autocompleteUrl:i,selectHandler:o,closeHandler:s,openHandler:l}=t,c={cache:{},ajax:{dataType:"json",jsonp:!1}},d={appendTo:e.closest(".ck-labeled-field-view"),source:function(e,t){const{cache:o}=c;var n=e.term;o.hasOwnProperty(n)?t(o[n]):r.ajax(i,{success:function(e){o[n]=e.suggestions,t(e.suggestions)},data:{q:n},...c.ajax})},select:o,focus:()=>!1,search:()=>!d.isComposing,close:s,open:l,minLength:1,isComposing:!1},u=r(e).autocomplete(d),p=u.data("ui-autocomplete");p.widget().menu("option","items","> :not(.linkit-result-line--group)"),p._renderMenu=a,p._renderItem=n,u.autocomplete("widget").addClass("linkit-ui-autocomplete ck-reset_all-excluded"),u.on("click",(function(){u.autocomplete("search",u.val())})),u.on("compositionstart.autocomplete",(function(){d.isComposing=!0})),u.on("compositionend.autocomplete",(function(){d.isComposing=!1}))}(i,{autocompleteUrl:`/linkit/autocomplete/${e}`,selectHandler:(e,{item:t})=>(t.path&&(e.target.value=t.path),!1)})}}})(),o=o.default})()));